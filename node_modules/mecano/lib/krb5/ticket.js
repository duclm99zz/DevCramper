// Generated by CoffeeScript 1.11.1
var krb5, uid_gid;

module.exports = function(options) {
  if (!options.keytab && !options.password) {
    throw Error("Incoherent options: expects one of keytab or password");
  }
  this.call(function(_, callback) {
    return uid_gid(options, callback);
  });
  return this.execute({
    cmd: "if " + (krb5.su(options, 'klist -s')) + "; then exit 3; fi\n" + (krb5.kinit(options)),
    code_skipped: 3
  });
};

krb5 = require('../misc/krb5');

uid_gid = require('../misc/uid_gid');
